services:
  open-webui:
    image: ${WEBUI_DOCKER_IMAGE:-ghcr.io/open-webui/open-webui:main}
    container_name: ${PROJECT_NAME:-open-webui}
    restart: unless-stopped
    volumes:
      - open-webui:/app/backend/data
    logging:
      driver: "json-file"
      options:
        max-size: 10m
        max-file: 3
    environment:
      OPENAI_API_BASE_URL: ${OPENAI_API_BASE_URL}
      OPENAI_API_KEY: ${OPENAI_API_KEY}
      TASK_MODEL_EXTERNAL: ${TASK_MODEL_EXTERNAL}
      DEFAULT_MODELS: ${DEFAULT_MODELS}
      DEFAULT_LOCALE: ${DEFAULT_LOCALE}
      ENABLE_EVALUATION_ARENA_MODELS: ${ENABLE_EVALUATION_ARENA_MODELS}
      ENABLE_OLLAMA_API: ${ENABLE_OLLAMA_API}
      WEBUI_SECRET_KEY: ${WEBUI_SECRET_KEY}
      VIRTUAL_PORT: ${VIRTUAL_PORT}
      VIRTUAL_HOST: ${VIRTUAL_HOST}
      LETSENCRYPT_HOST: ${LETSENCRYPT_HOST}
      LETSENCRYPT_EMAIL: ${LETSENCRYPT_EMAIL}
      WHISPER_MODEL: ${WHISPER_MODEL} # Whisper model for OpenAI Edge TTS
      AUDIO_TTS_ENGINE: ${AUDIO_TTS_ENGINE} # Text-to-Speech engine for OpenAI Edge TTS
      AUDIO_TTS_OPENAI_API_BASE_URL: ${AUDIO_TTS_OPENAI_API_BASE_URL} # OpenAI Edge TTS API URL
      AUDIO_TTS_OPENAI_API_KEY: ${AUDIO_TTS_OPENAI_API_KEY} # API key for OpenAI Edge TTS
      AUDIO_TTS_VOICE: ${AUDIO_TTS_VOICE} # Voice for OpenAI Edge TTS
    networks:
      - open-webui-network
      - letsencrypt-network
volumes:
  open-webui:
    name: ${PROJECT_NAME:-open-webui}
networks:
  open-webui-network:
    name: ${PROJECT_NAME:-open-webui}-network
  letsencrypt-network:
    external: true
